
* [&sect; 1. Понятие объединения](#1)
* [&sect; 2. Виды объединений](#2)
  * [2.1 Внутреннее объединение](#2.1)
  * [2.2 Перекрестное объединение](#2.2)
  * [2.3 Левое внешнее объединение](#2.3)
  * [2.4 Правое внешнее объединение](#2.4)
  * [2.5 Полное внешнее объединение](#2.5)

###&sect; 1. Понятие объединения###{#1}

Объядинение --- это процесс получения нового отношения, содержащего записи, составленные из компонентов двух исходных отношений.

###&sect; 2. Виды объединений{#2}

####2.1 Внутреннее объединение####{#2.1}

Внутреннее объединение --- это получение нового отношения из двух исходных на основе некоторого условия.

Создадим две таблицы:

~~~{: lang=sqlite}
create table words(
  id   integer primary key,
  word text
);

create table numbers(
  number integer,
  word_id integer
);
~~~

Заполним их данными:

~~~{: lang=sqlite}
insert into words(word)
  values('one');

insert into words(word)
  values('two');

insert into words(word)
  values('three');

insert into numbers(number, word_id)
  values(2, 2);

insert into numbers(number, word_id)
  values(3, 3);

insert into numbers(number, word_id)
  values(4, 4);
~~~

Таблицы примут следующий вид:

~~~{: lang=sqlite}
select * from words;
  id          word      
  ----------  ----------
  1           one       
  2           two       
  3           three     

select * from numbers;
  number      word_id   
  ----------  ----------
  2           2         
  3           3         
  4           4         
~~~

Выполним операцию объединения:

~~~{: lang=sqlite}
select     words.word as word, numbers.number as number
from       words
inner join numbers
on         words.id = numbers.word_id;
~~~

На основе переданного условия, команда создаст отношение, содержащее две записи:

~~~{: lang=sqlite}
word        number    
----------  ----------
two         2         
three       3         
~~~

Графически внутреннее объединение может быть представлено следующим образом:

[[!include inner_join_svg]]

####2.2 Перекрестное объединение####{#2.2}

Перекрестное объединение --- это получение отношения, состоящего из записей, компонентами которых будут являться все возможные пары компонентов двух исходных отношений.

Используя базу данных из подпараграфа [2.1](#2.1), выполним перекрестное объединение:

~~~{: lang=sqlite}
  select     words.word as word, numbers.number as number
  from       words
  cross join numbers;
~~~

Данная команда создаст следующее отношение:

~~~{: lang=sqlite}
word        number    
----------  ----------
one         2         
one         3         
one         4         
two         2         
two         3         
two         4         
three       2         
three       3         
three       4         
~~~

Графически перекрестное объединение можно представить следующим образом:

[[!include cross_join_svg]]

####2.3 Левое внешнее объединение####{#2.3}

Левое внешнее объединение --- это получение нового отношения, состоящего из записей, содержащих компоненты двух исходных отношений, удовлетворяющих условию, а так же все компоненты из &laquo;левого&laquo; отношения.

Используя базу данных из подпараграфа [2.1](#2.1), выполним левое внешнее объединение:

~~~{: lang=sqlite}
select    words.word as word, numbers.number as number
from      words
left join numbers
on        words.id = numbers.word_id;
~~~

Данная команда создаст следующее отношение:

~~~{: lang=sqlite}
word        number    
----------  ----------
one         null      
two         2         
three       3         
~~~

Из примера видно, что в результат была включена запись, содержащая один из компонентов &laquo;левого&raquo; отношения. Поскольку для него не нашлось удовлетворяющего условию компонета &laquo;правого&raquo; отношения, то его место заняло значение `null`.

Графически левое внешнее объединение можно представить следующим образом:

[[!include left_outer_join_svg]]

####2.4 Правое внешнее объединение####{#2.4}

Правое внешнее объединение --- это получение нового отношения, состоящего из записей, содержащих компоненты двух исходных отношений, удовлетворяющих условию, а так же все компоненты &laquo;правого&raquo; отношения.

SQLite не поддерживает операцию `right join`, поэтому для её симуляции следует использовать операцию `left join` с переставлеными исходными отношениями.

Используя базу данных из подпараграфа [2.1](#2.1), выполним правое внешнее объединение:

~~~{: lang=sqlite}
  select    words.word as word, numbers.number as number
  from      numbers
  left join words
  on        words.id = numbers.word_id;
~~~

Данная команда создаст следующее отношение:

~~~{: lang=sqlite}
word        number    
----------  ----------
two         2         
three       3         
null        4         
~~~

Из примера видно, что в результат была включена запись, содержащая один из компонентов &laquo;правого&raquo; отношения. Поскольку для него не нашлось удовлетворяющего условию компонета &laquo;левого&raquo; отношения, то его место заняло значение `null`.

Графически правое внешнее объединение можно представить следующим образом:

[[!include right_outer_join_svg]]

####2.5 Полное внешнее объединение####{#2.5}

Полное внешнее объединение --- это процесс получения нового отношения, состоящего из записей, содержащих компоненты двух исходных отношений, удовлетворяющих условию, а также все компоненты как &laquo;левого&raquo;, так и &laquo;правого&raquo; отношений.

SQLite не поддерживает операцию `full outer join`, поэтому для её симуляции следует использовать запрос [`union all`](/sql/show/Составные+запросы#1.2), составленный из двух запросов [`left outer join`](#2.3).

Используя базу данных из подпараграфи [2.1](#2.1), выполним полное внешнее объединение:

~~~{: lang=sqlite}
select    words.word as word, numbers.number as number
from      words
left join numbers
on        words.id = numbers.word_id
union all
select    words.word as word, numbers.number as number
from      numbers
left join words
on        words.id = numbers.word_id;
~~~

~~~{: lang=sqlite}
word        number    
----------  ----------
null        4         
one         null      
three       3         
two         2         
~~~

Из примера видно, что в результирующее отношение были включены записи, содержащие компоненты &laquo;левого&raquo; и &laquo;правого&raquo; отношений. Поскольку для этих компонентов не было найдено пары, удовлетворяющей условию, то её место было занято значением `null`.

Графически полное внешнее объединение можно представить следующим образом:

[[!include full_outer_join_svg]]

