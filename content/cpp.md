---
title: C++
---

# Содержание #
{: id="Содержание"}

[Вокабуляр](#Вокабуляр)

[Ссылки](#Ссылки)

[Указатели и динамическая память](#Указатели_и_динамическая_память)

# Вокабуляр #
{: id="Вокабуляр"}

**виртуальное адресное пространство** (_virtual address space_)

**виртуальная память** (_virtual memory_)

**инициализация переменной** (_variable initialization_)

**куча**, **хип**, **свободная память** (_heap_, _free store_)

**локальная память тредов** (_thread local storage_)

**оператор вставки в поток** (_stream insertion operator_)

  `<<`

  [Buontempo: C++ by example; 1.4.2]

**оператор разрешения области видимости** (_scope resolution operator_)

  `::`

  [Buontempo: C++ by example; 1.4.2]

**приведение** (casting)

**принужденное приведение** (coercing)

**присваивание (значения переменной)** (_variable assignment_)

**фрейм аппаратной памяти** _physical memory frame_

Участок аппаратной памяти с которым связывается страница виртуальной памяти
процесса при его обращении его к данным, содержащимся на данной странице.

**статическая память** (_static storage_)

**стек** (_stack_)

**стековый фрейм** (_stack frame_)

Область памяти, выделяемая всякий раз, когда вызывается функция, и предназначенная
для временного хранения её аргументов и локальных переменных.

**страница памяти** (_memory page_)

Фиксированный блок виртуального адресного пространства

# Указатели и динамическая память #
{: id="Указатели_и_динамическая_память"}

## Важные вопросы ##

• Автоматическое выделение памяти и динамическое управление памятью

• Жизненный цикл объекта C++ и как управлять владением объекта

• Эффективное управление памятью

  Как добиться компактности в репрезентации данных в условиях ограниченного
  объема памяти. Как ускорить работу программы в условиях достаточного объема
  памяти.

• Как снизить потребление динамической памяти

  Выделение и высвобождение динамической памяти затратная процедура. Сокращение
  объема данных процедур может ускорить работу программы.

* * *

Механизм динамической памяти позволяет создавать программы с данными, имеющими
нефиксированный размер в момент компиляции.

Память в программах C++ разделена на две части — _стек_ и _свободная память_.
Стек состоит из _стековых фреймов_. Текущая выполняемая функция размещается в
верхнем стековом фрейме. В памяти, выделенной под верхний стековый фрейм,
хранятся аргументы и локальные переменные текущей выполняемой функции. Если
текущая функция вызывает другую функцию, то создается другой стековый фрейм,
размещаемый поверх текущего. Аргументы, переданные текущей функцией в вызываемую
функцию, копируются в память, выделенную под вновь созданный стековый фрейм.

Когда функция, находящаяся на вершине стека, завершает свою работу, то
выделенный под неё стековый фрейм уничтожается и вместе с этим происходит
высвобождение памяти, выделенной под этот фрейм. Таким образом, не требуется
ручное высвобождение памяти, выделенной для функции. Это происходит автоматически.

_Свободная память_ — это область памяти, полностью независимая от текущей
выполняемой функции или текущего стекового фрейма. Можно размещать переменные в
свободной памяти, если необходимо, чтобы они сохранялись в ней даже после
завершения работы функции, в которой эти переменные были созданы.

Память, выделенная в свободном пространстве, не высвобождается автоматически.
Высвобождение должно осуществляться вручную. Однако, существует механизм, так
называемых „умных указателей“ (_smart pointers_), с помощью которых можно
устранить необходимость ручного высвобождения памяти в свободном пространстве.

* * *

Современные операционные системы являются системами с виртуальной памятью.

Каждый процесс имеет своё собственное _виртуальное адресное пространство_,
изолированное от адресных пространств других процессов.

Виртуальное адресное пространство процесса делится на блоки фиксированного размера,
называемые _страницами памяти_.

При обращении процесса к данным, содержащимся на странице виртуальной памяти,
указанная страница связывается с сегментом аппаратной памяти, называемым _фреймом_.

* * *

Стек и хип являются двумя наиболее важными частями памяти в программах C++.
Помимо данных частей существуют также _статическая память_ и _локальная память тредов_.

Стек и хип размещаются в виртуальном адресном пространстве процесса.

Стек — это место, где размещаются локальные переменные и аргументы функций.

Стек увеличивается, когда происходит вызов функции и уменьшается, когда функция
завершает свою работу.

Каждый тред имеет свой собственный стек. Поэтому стековая память является потокобезопасной.

Хип является памятью, разделяемой между потоками запущенного процесса. Он
увеличивается при выделении памяти с помощью оператора `new` и уменьшается, при
высвобождении памяти с помощью оператора `delete`.

Хип и стек находятся на противоположных сторонах адресного пространства
процесса. Хип начинается с низкого адреса и расширяется в сторону более
высокого адреса. Стек, напротив, начинается с более высокого адреса и
увеличивается в сторону более низкого.

    +------+
    | Стек |
    +------+
    |   ↓  |
    |      |
    |   ↑  |
    +------+
    | Куча |
    +------+

# Ссылки #
{: id="Ссылки"}

<!-- vim: set textwidth=80 colorcolumn=80: -->
