---
title: CMake
---

# Содержание #
{: id="Содержание" }

[Переменные окружения](#Переменные_окружения)

[Команды](#Команды)

[Ссылки](#Ссылки)

В процессе разработки программного обеспечения наступает момент, когда
приходится переводить исходный код во что-то, что может быть использовано
конечным пользователем.

Этот процесс называется _сборкой программного обеспечения_.

Сборка программного обеспечения — это комплексный процесс.

Для управления комплексностью при сборки программного обеспечения требуется подходящий инструмент.

Таким иструментом является CMake.

**CMake** — инструмент управления сборкой программного обеспечения.

Цель CMake — обеспечить управляемостью комплексный процесс сборки программного обеспечения.

CMake — это набор инструментов для осуществления сборки программного обеспечения.

Сборка программного обеспечения в системе CMake происходит поэтапно.

Упрощенно, процесс работы CMake можно разделить на пять этапов.

* Составление _файла описания проекта_ (_файла управления сборкой_)

* Генерирование _файла сборки_ из файла управления сборкой

  * Конфигурация

  * Собственно генерирование

* Сборка

* Тестирование

* Упаковка

Основным артефактом системы CMake является файл `CMakeLists.txt`. Он определяет
что должно быть собрано и как, какие тесты должны быть запущены и какие пакеты
созданы.

Данный файл является _файлом описания проекта_. Он служит для управления
комплексным процессом сборки программного обеспечения.

Фундаментальным понятием системы CMake является понятие _проекта_. Сборка
проекта — это то, что находится под управлением системы CMake.

Структура проекта состоит из двух частей: _исходные файлы_ и _двоичные файлы_.

В рамках системы CMake установлен следующий порядок размещения указанных файлов
по каталогам: исходные файлы размещаются в _каталоге с исходным кодом_, двоичные
файлы размещаются в _каталоге с двоичными файлами_ (или в _каталоге сборки_).

Каталог с исходным кодом находится под управлением разработчика.

Каталог сборки находится под управлением системы CMake. В процессе работы
системы в этом каталоге создаются различные артефакты системы сборки, а также файлы,
являющиеся результатом сборки.

В отношении того, где будет размещен каталог сборки существует два варианта.
Каталог сборки размещен в каталоге с исходным кодом (_in-source_). Каталог
сборки размещен вне каталога с исходным кодом (_out-source_).

В процессе работы система CMake создает файлы сборки выбранной системы сборки.
Для конкретной системы сборки должен быть использован соответствующий генератор.

Базовая форма работы с системой CMake.

    cd build
    cmake -G Ninja ../source
    cmake --build .

# Переменные окружения #

[`CMAKE_GENERATOR`](https://cmake.org/cmake/help/latest/envvar/CMAKE_GENERATOR.html)

: Установить генератор, используемый системой по умолчанию

# Команды #
{: id="Команды" }

`cmake -G Ninja ..`

: Сгенерировать файлы сборки системы Ninja (`-G Ninja`) в текущем каталоге

: Файл сборки `CMakeLists.txt` должен находиться в родительском каталоге.

: Сгенерированные файлы будут находиться в текущем каталоге.

`cmake --build .`

: Осуществить сборку проекта

: Сборка будет осуществлена из файлов, сгенерированных командой `cmake` в текущем каталоге.

# Ссылки #
{: id="Ссылки" }

* [FAQ · Wiki · CMake / Community · GitLab](https://gitlab.kitware.com/cmake/community/-/wikis/FAQ)

* [CMake Reference Documentation — CMake 3.29.0 Documentation](https://cmake.org/cmake/help/latest)

* [CMake Discourse](https://discourse.cmake.org)

<!-- vim: set textwidth=80 colorcolumn=80: -->
